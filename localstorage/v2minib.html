<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LocalStorage Viewer Mini â€“ MadGazan</title>
<style>
body { font-family: system-ui, Arial, sans-serif; background:#fffef8; padding:15px; max-width:600px; margin:auto;}
h1 { text-align:center; color:#b36b00; margin-bottom:5px;}
.subtitle { text-align:center; font-size:.9rem; color:#666; margin-bottom:10px;}
.stats { text-align:center; font-size:1rem; color:#0066cc; margin-bottom:10px;}
.import-export { margin-bottom:10px; display:flex; gap:6px; flex-wrap:wrap;}
.import-export input[type="file"] { padding:4px; border-radius:4px; border:1px solid #ccc;}
button { padding:4px 8px; border-radius:4px; border:1px solid #ccc; cursor:pointer; font-size:.8rem;}
button:hover { background:#ffd42a;}
footer { text-align:center; font-size:0.8rem; color:#888; margin-top:10px;}
</style>
</head>
<body>

<h1>ðŸ—‚ LocalStorage Mini</h1>
<div class="subtitle">Auto Load â€¢ Export & Import</div>

<div class="import-export">
  <button onclick="exportLocalStorage()">ðŸ’¾ Export JSON</button>
  <input type="file" id="importFile" accept=".json">
</div>

<div class="stats" id="totalChars">Total: 0 chars</div>

<footer>MadGazan Tools â€¢ Read-Only Stats</footer>

<script>
const totalChars = document.getElementById('totalChars');
const fileInput = document.getElementById('importFile');

// ===== Hitung total chars =====
function updateTotalChars(){
  let sum = 0;
  for(let i=0;i<localStorage.length;i++){
    const val = localStorage.getItem(localStorage.key(i));
    sum += val.length;
  }
  totalChars.textContent = `Total: ${sum} chars`;
}

// ===== Export JSON =====
function exportLocalStorage(){
  const data = {};
  for(let i=0;i<localStorage.length;i++){ data[localStorage.key(i)] = localStorage.getItem(localStorage.key(i)); }
  const blob = new Blob([JSON.stringify(data,null,2)], {type:'application/json'});
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = 'localstorage_backup.json';
  a.click();
  URL.revokeObjectURL(a.href);
}

// ===== Auto Import JSON saat pilih file =====
fileInput.addEventListener('change', function(){
  const file = this.files[0];
  if(!file) return;
  const reader = new FileReader();
  reader.onload = function(e){
    try{
      const data = JSON.parse(e.target.result);
      Object.keys(data).forEach(k=>localStorage.setItem(k,data[k]));
      updateTotalChars();
    }catch(err){}
  };
  reader.readAsText(file);
});

// ===== Update total chars saat load =====
updateTotalChars();
</script>

</body>
</html>
